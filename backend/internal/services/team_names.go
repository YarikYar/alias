package services

import (
	"math/rand"
	"time"
)

func init() {
	rand.Seed(time.Now().UnixNano())
}

// Прилагательные (мужской род)
var adjectivesMasc = []string{
	"Быстрый", "Ленивый", "Грустный", "Весёлый", "Сильный",
	"Слабый", "Умный", "Глупый", "Злой", "Добрый",
	"Хитрый", "Честный", "Храбрый", "Трусливый", "Богатый",
	"Бедный", "Толстый", "Худой", "Высокий", "Низкий",
	"Красивый", "Страшный", "Молодой", "Старый", "Голодный",
	"Сытый", "Холодный", "Горячий", "Мокрый", "Сухой",
	"Чистый", "Грязный", "Яркий", "Тёмный", "Громкий",
	"Тихий", "Свежий", "Гнилой", "Пушистый", "Колючий",
	"Дикий", "Домашний", "Летучий", "Плавучий", "Бегущий",
}

// Прилагательные (женский род)
var adjectivesFem = []string{
	"Быстрая", "Ленивая", "Грустная", "Весёлая", "Сильная",
	"Слабая", "Умная", "Глупая", "Злая", "Добрая",
	"Хитрая", "Честная", "Храбрая", "Трусливая", "Богатая",
	"Бедная", "Толстая", "Худая", "Высокая", "Низкая",
	"Красивая", "Страшная", "Молодая", "Старая", "Голодная",
	"Сытая", "Холодная", "Горячая", "Мокрая", "Сухая",
	"Чистая", "Грязная", "Яркая", "Тёмная", "Громкая",
	"Тихая", "Свежая", "Гнилая", "Пушистая", "Колючая",
	"Дикая", "Домашняя", "Летучая", "Плавучая", "Бегущая",
}

// Прилагательные (средний род)
var adjectivesNeut = []string{
	"Быстрое", "Ленивое", "Грустное", "Весёлое", "Сильное",
	"Слабое", "Умное", "Глупое", "Злое", "Доброе",
	"Хитрое", "Честное", "Храброе", "Трусливое", "Богатое",
	"Бедное", "Толстое", "Худое", "Высокое", "Низкое",
	"Красивое", "Страшное", "Молодое", "Старое", "Голодное",
	"Сытое", "Холодное", "Горячее", "Мокрое", "Сухое",
	"Чистое", "Грязное", "Яркое", "Тёмное", "Громкое",
	"Тихое", "Свежее", "Гнилое", "Пушистое", "Колючее",
	"Дикое", "Домашнее", "Летучее", "Плавучее", "Бегущее",
}

// Существительные (мужской род)
var nounsMasc = []string{
	"Бегемот", "Крокодил", "Жираф", "Слон", "Тигр",
	"Лев", "Медведь", "Волк", "Заяц", "Ёж",
	"Кот", "Пёс", "Хомяк", "Хорёк", "Енот",
	"Пингвин", "Дельфин", "Кит", "Осьминог", "Краб",
	"Таракан", "Комар", "Паук", "Жук", "Червяк",
	"Пирог", "Блин", "Суп", "Салат", "Торт",
	"Огурец", "Помидор", "Арбуз", "Банан", "Ананас",
	"Чайник", "Утюг", "Холодильник", "Пылесос", "Телевизор",
	"Карандаш", "Ластик", "Циркуль", "Глобус", "Компас",
	"Самолёт", "Вертолёт", "Корабль", "Поезд", "Автобус",
}

// Существительные (женский род)
var nounsFem = []string{
	"Панда", "Кобра", "Акула", "Черепаха", "Обезьяна",
	"Лиса", "Белка", "Мышь", "Крыса", "Змея",
	"Сова", "Ворона", "Синица", "Курица", "Утка",
	"Бабочка", "Стрекоза", "Пчела", "Муха", "Гусеница",
	"Морковь", "Картошка", "Капуста", "Свёкла", "Тыква",
	"Груша", "Слива", "Вишня", "Клубника", "Малина",
	"Ложка", "Вилка", "Кастрюля", "Сковорода", "Тарелка",
	"Лампа", "Батарея", "Дверь", "Стена", "Крыша",
	"Ручка", "Линейка", "Книга", "Тетрадь", "Парта",
	"Ракета", "Машина", "Лодка", "Телега", "Карета",
}

// Существительные (средний род)
var nounsNeut = []string{
	"Чудовище", "Животное", "Существо", "Облако", "Солнце",
	"Море", "Озеро", "Болото", "Поле", "Небо",
	"Яблоко", "Яйцо", "Молоко", "Мясо", "Тесто",
	"Ведро", "Колесо", "Крыло", "Зеркало", "Окно",
	"Одеяло", "Полотенце", "Мыло", "Пальто", "Кольцо",
	"Чудо", "Горе", "Счастье", "Богатство", "Добро",
	"Зло", "Время", "Место", "Слово", "Дело",
}

type Gender int

const (
	Masculine Gender = iota
	Feminine
	Neuter
)

type TeamNamePair struct {
	Adjective string
	Noun      string
	Gender    Gender
}

// GenerateTeamName генерирует случайное название команды (прилагательное + существительное)
func GenerateTeamName() string {
	// Выбираем случайный род
	gender := Gender(rand.Intn(3))

	var adjective, noun string

	switch gender {
	case Masculine:
		adjective = adjectivesMasc[rand.Intn(len(adjectivesMasc))]
		noun = nounsMasc[rand.Intn(len(nounsMasc))]
	case Feminine:
		adjective = adjectivesFem[rand.Intn(len(adjectivesFem))]
		noun = nounsFem[rand.Intn(len(nounsFem))]
	case Neuter:
		adjective = adjectivesNeut[rand.Intn(len(adjectivesNeut))]
		noun = nounsNeut[rand.Intn(len(nounsNeut))]
	}

	return adjective + " " + noun
}

// GenerateUniqueTeamNames генерирует N уникальных названий команд
func GenerateUniqueTeamNames(count int) []string {
	names := make([]string, 0, count)
	used := make(map[string]bool)

	maxAttempts := count * 100 // защита от бесконечного цикла
	attempts := 0

	for len(names) < count && attempts < maxAttempts {
		name := GenerateTeamName()
		if !used[name] {
			used[name] = true
			names = append(names, name)
		}
		attempts++
	}

	// Если не хватило уникальных названий, добавляем с номерами
	for len(names) < count {
		names = append(names, GenerateTeamName()+" "+string(rune('A'+len(names))))
	}

	return names
}
